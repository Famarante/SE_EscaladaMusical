<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
        var stage, preload, bird, startTime, timerTxt, meterCounter = 0, meterCounterTxt, bubbleSpeech, factor = 1, fibonacci = 1;
        var birdSound, houseSound, kidSound;
        
        document.documentElement.style.overflow = 'hidden';  // firefox, chrome
        document.body.scroll = 'no'; // ie only
        
        function handleResize(){
            stage.canvas.width = 1024;
            stage.canvas.height = 768;
            factor = 1;
            var factorTmp;
            if(window.innerWidth < 1024){
                factorTmp = 1 - (1024 - window.innerWidth)/1024;
                if(factorTmp < factor){
                    factor = factorTmp;
                }
            }
            if(window.innerHeight < 768){
                factorTmp = 1 - (768 - window.innerHeight)/768;
                if(factorTmp < factor){
                    factor = factorTmp;
                }
            }
            if(window.innerWidth >= 1024 || window.innerHeight >= 768){
                stage.canvas.width = 1024;
                stage.canvas.height = 768;
            }
            stage.canvas.width = 1024*factor;
            stage.canvas.height = 768*factor;
            stage.scaleX = factor;
            stage.scaleY = factor;
            stage.update();
        }
        
        function handleComplete() {
            stage = new createjs.Stage("canvas");
            stage.enableMouseOver();

            timerTxt = new createjs.Text("Tempo: ", "bold 24px Arial", "#000000");
            timerTxt.name = "timerText";
            timerTxt.textAlign = "left";
            timerTxt.textBaseline = "middle";
            timerTxt.x = 855;
            timerTxt.y = 40;

            meterCounterTxt = new createjs.Text("Distância percorrida: " + meterCounter + " m", "bold 24px Arial", "#000000");
            meterCounterTxt.name = "meterCounterTxt";
            meterCounterTxt.textAlign = "left";
            meterCounterTxt.textBaseline = "middle";
            meterCounterTxt.x = 25;
            meterCounterTxt.y = 40;

            handleResize();

            window.addEventListener("resize", handleResize);
            
            startMenuLevel();
        }

        function init() {
            var manifest = [
                {id: "a_sound", src: "assets/sounds/a_sound.mp3"},
                {id: "b_sound", src: "assets/sounds/b_sound.mp3"},
                {id: "c_sound", src: "assets/sounds/c_sound.mp3"},
                {id: "csharp_sound", src: "assets/sounds/csharp_sound.mp3"},
                {id: "d_sound", src: "assets/sounds/d_sound.mp3"},
                {id: "dsharp_sound", src: "assets/sounds/dsharp_sound.mp3"},
                {id: "e_sound", src: "assets/sounds/e_sound.mp3"},
                {id: "f_sound", src: "assets/sounds/f_sound.mp3"},
                {id: "fsharp_sound", src: "assets/sounds/fsharp_sound.mp3"},
                {id: "g_sound", src: "assets/sounds/g_sound.mp3"},
                {id: "gsharp_sound", src: "assets/sounds/gsharp_sound.mp3"},
                {id: "background", src: "assets/images/background.png"},
                {id: "start_menu_background", src: "assets/images/start_menu_background.png"},
                {id: "selection_level_background", src: "assets/images/selection_level_background.png"},
                {id: "pass_button", src: "assets/images/pass_button.png"},
                {id: "question_mark_right", src: "assets/images/question_mark_right_bubble.png"},
                {id: "question_mark_left", src: "assets/images/question_mark_left_bubble.png"},
                //LEVEL 1 ITEMS
                {id: "level1_background", src: "assets/images/level1/background.png"},
                {id: "level1_birds", src: "assets/images/level1/phase1_background.png"},
                {id: "level1_signs", src: "assets/images/level1/phase2_background.png"},
                {id: "level1_houses", src: "assets/images/level1/phase3_background.png"},
                {id: "red_bird", src: "assets/images/level1/red_bird.png"},
                {id: "blue_bird", src: "assets/images/level1/blue_bird.png"},
                {id: "c_bubble", src: "assets/images/level1/c_bubble.png"},
                {id: "csharp_bubble", src: "assets/images/level1/csharp_bubble.png"},
                //LEVEL 2 ITEMS
                {id: "level2_background", src: "assets/images/level2/background.png"},
                {id: "level2_kids", src: "assets/images/level2/phase1_background.png"},
                {id: "level2_flags", src: "assets/images/level2/phase2_background.png"},
                {id: "level2_tracks", src: "assets/images/level2/phase3_background.png"},
                {id: "boy", src: "assets/images/level2/boy.png"},
                {id: "girl", src: "assets/images/level2/girl.png"},
                {id: "d_bubble", src: "assets/images/level2/d_bubble.png"},
                {id: "dsharp_bubble", src: "assets/images/level2/dsharp_bubble.png"}

            ];
            createjs.Sound.registerPlugins([createjs.HTMLAudioPlugin]);

            preload = new createjs.LoadQueue(false);
            preload.addEventListener("complete", handleComplete);
            preload.installPlugin(createjs.Sound);
            preload.loadManifest(manifest);
        }
        
        function handleMouseEvent(evt) {
            var target = evt.target;
            switch(evt.type){
                case "mouseover":
                    if(stage.name == "firstlevel3"){
                        playSound(target.name);
                    }
                    break;
                case "click":
                        if(target.parent.name == "startButton") {
                            selectionLevel();
                        }
                        else if(target.name == "firstLevel" && stage.name == "selectionLevel"){
                            firstLevel1();
                        }
                        else if(target.name == "secondLevel" && stage.name == "selectionLevel"){
                            secondLevel1();
                        }
                        else if(target.parent.name == "rulesButton"){
                            alert("REGRAS");
                        }
                        else if(target.parent.name == "skipButton" && stage.name == "firstlevel1"){
                            meterCounter += 100;
                            firstLevel2();
                        }
                        else if(target.parent.name == "skipButton" && stage.name == "secondlevel1"){
                            meterCounter += 100;
                            secondLevel2();
                        }
                        else if(target.parent.name == "skipButton" && stage.name == "firstlevel2"){
                            firstLevel3();
                        }
                        else if(target.parent.name == "skipButton" && stage.name == "secondlevel2"){
                            secondLevel3();
                        }
                        else if(stage.name == "firstlevel2" && fibonacci < 3){
                            switch(target.name){
                                case "cSharpNoteBtn":
                                    if(fibonacci == 2 && meterCounter > 100){
                                        meterCounter = 500;
                                        fibonacci = 3;
                                        stage.getChildByName("cSharpBird").getChildByName("leftBubbleSpeech").image = preload.getResult("csharp_bubble");
                                    }
                                    else{
                                        meterCounter -= 50;
                                        fibonacci = 2;
                                        if(meterCounter == 0)
                                            firstLevel1();
                                    }
                                    break;
                                case "fNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 0)
                                        firstLevel1();
                                    break;
                                case "gNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 0)
                                        firstLevel1();
                                    break;
                                case "dNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 0)
                                        firstLevel1();
                                    break;
                                case "fSharpNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 0)
                                        firstLevel1();
                                    break;
                                case "cNoteBtn":
                                    if(fibonacci == 1){
                                        meterCounter += 200;
                                        fibonacci = 2;
                                        stage.getChildByName("rightBubbleSpeech").image = preload.getResult("c_bubble");
                                        stage.getChildByName("cSharpBird").visible = true;
                                    }
                                    else{
                                        if(meterCounter == 0)
                                            firstLevel1();
                                    }
                                    break;
                                case "aNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 0)
                                        firstLevel1();
                                    break;
                            }
                        }
                        else if(stage.name == "secondlevel2" && fibonacci < 3){
                            switch(target.name){
                                case "aNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "aSharpNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "bNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "cNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "cSharpNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "dNoteBtn":
                                    if(fibonacci == 1){
                                        meterCounter += 250;
                                        fibonacci = 2;
                                        stage.getChildByName("boyContainer").getChildByName("rightBubbleSpeech").image = preload.getResult("d_bubble");
                                        stage.getChildByName("girlContainer").visible = true;
                                    }
                                    else{
                                        if(meterCounter == 940)
                                            secondLevel1();
                                    }
                                    break;
                                case "dSharpNoteBtn":
                                    if(fibonacci == 2 && meterCounter > 1050){
                                        meterCounter = 1580;
                                        fibonacci = 3;
                                        stage.getChildByName("girlContainer").getChildByName("leftBubbleSpeech").image = preload.getResult("dsharp_bubble");
                                        addSkipButton();
                                    }
                                    else{
                                        meterCounter -= 50;
                                        fibonacci = 2;
                                        if(meterCounter == 940)
                                            secondLevel1();
                                    }
                                    break;
                                case "eNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "fNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "fSharpNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "gNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                                case "gSharpNoteBtn":
                                    meterCounter -= 50;
                                    if(meterCounter == 940)
                                        secondLevel1();
                                    break;
                            }
                        }
                        else if(stage.name == "firstlevel3" && fibonacci < 3){
                            console.log(target.name);
                            switch(target.name){
                                case "csharp_sound":
                                    if(fibonacci == 2 && meterCounter > 300){
                                        meterCounter = 940;
                                        fibonacci = 3;
                                    }
                                    else{
                                        meterCounter -= 50;
                                        fibonacci = 2;
                                        if(meterCounter == 300)
                                            firstLevel2();
                                    }
                                    break;
                                case "f_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "g_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "gsharp_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "d_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "dsharp_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "fsharp_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "c_sound":
                                    if(fibonacci == 1){
                                        meterCounter += 250;
                                        fibonacci = 2;
                                    }
                                    else if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "a_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "e_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                                case "b_sound":
                                    meterCounter -= 50;
                                    if(meterCounter == 300)
                                        firstLevel2();
                                    break;
                            }
                        }
                    break;
                case "mouseout":
                    break;
                default:
                    break;
            }
            stage.update();
        }
        function handleTick() {
            var currentTime = (new Date()).getTime();

            var time = Math.floor((currentTime-startTime)/1000);
            if(time > 59){
                timerTxt.text = "Tempo: " + Math.floor(time/60) + "m" + time%60 + "s";
            }
            else{
                timerTxt.text = "Tempo: " + time + "s";
            }
            switch(stage.name){
                case "firstlevel1":
                    if (birdSound.playState == createjs.Sound.PLAY_FINISHED && birdSound.src == "assets/sounds/c_sound.mp3") {
                        stage.getChildByName("cSharpBird").getChildByName("cSharpBubbleSpeech").visible = true;
                        stage.getChildByName("cBubbleSpeech").visible = false;
                        playSound("csharp_sound");
                    }
                    else if (birdSound.playState == createjs.Sound.PLAY_FINISHED && birdSound.src == "assets/sounds/csharp_sound.mp3") {
                        stage.getChildByName("cSharpBird").getChildByName("cSharpBubbleSpeech").visible = false;
                        stage.getChildByName("cBubbleSpeech").visible = true;
                        playSound("c_sound");
                    }
                    break;
                case "firstlevel2":
                    if(meterCounter <= 100){
                        stage.getChildByName("rightBubbleSpeech").image = preload.getResult("question_mark_right");
                        stage.getChildByName("cSharpBird").visible = false;
                        fibonacci = 1;
                    }
                    else if(meterCounter == 500 && fibonacci == 3 && !stage.getChildByName("skipButton")){
                        addSkipButton();
                    }
                    break;
                case "firstlevel3":
                    if(meterCounter <= 300){
                        firstLevel2();
                        fibonacci = 2;
                    }
                    else if(meterCounter == 940 && fibonacci == 3 && !stage.getChildByName("skipButton")){
                        addSkipButton();
                    }
                    break;
                case "secondlevel1":
                    if (kidSound.playState == createjs.Sound.PLAY_FINISHED && kidSound.src == "assets/sounds/d_sound.mp3") {
                        stage.getChildByName("dSharpBubbleSpeech").visible = true;
                        stage.getChildByName("dBubbleSpeech").visible = false;
                        playSound("dsharp_sound");
                    }
                    else if (kidSound.playState == createjs.Sound.PLAY_FINISHED && kidSound.src == "assets/sounds/dsharp_sound.mp3") {
                        stage.getChildByName("dSharpBubbleSpeech").visible = false;
                        stage.getChildByName("dBubbleSpeech").visible = true;
                        playSound("d_sound");
                    }
                    break;
            }
            meterCounterTxt.text = "Distância percorrida: " + meterCounter + " m";

            stage.update();
        }

        function playSound(target) {
            //Play the sound: play (src, interrupt, delay, offset, loop, volume, pan)
            switch (stage.name){
                case "firstlevel1":
                    var random = Math.floor((Math.random() * 3) + 1);
                    ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: random, volume: 0.1});
                    birdSound = createjs.Sound.play(target, ppc);
                    if (birdSound == null || birdSound.playState == createjs.Sound.PLAY_FAILED) {
                    }
                    break;
                case "firstlevel3":
                    var ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: 1, volume: 0.1});
                    houseSound = createjs.Sound.play(target, ppc);
                    if (houseSound == null || houseSound.playState == createjs.Sound.PLAY_FAILED) {
                    }
                    break;
                case "secondlevel1":
                    var random = Math.floor((Math.random() * 3) + 1);
                    ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: random, volume: 0.1});
                    kidSound = createjs.Sound.play(target, ppc);
                    if (kidSound == null || kidSound.playState == createjs.Sound.PLAY_FAILED) {
                    }
                    break;
            }
        }
        function handleLoad(event) {
        }
        function startMenuLevel(){
            stage.name = "startMenuLevel";
            var startMenuBackground = new createjs.Bitmap(preload.getResult("start_menu_background"));
            stage.addChild(startMenuBackground);

            var startBtnBg = new createjs.Shape();
            startBtnBg.name = "buttonBackground";
            startBtnBg.graphics.beginFill("red").drawRoundRect(0, 0, 256, 87, 20);

            var startBtnTxt = new createjs.Text("Jogar!", "bold 24px Arial", "#FFFFFF");
            startBtnTxt.name = "buttonText";
            startBtnTxt.textAlign = "center";
            startBtnTxt.textBaseline = "middle";
            startBtnTxt.x = 150/2;
            startBtnTxt.y = 60/2;

            var startBtn = new createjs.Container();
            startBtn.name = "startButton";
            startBtn.x = 384;
            startBtn.y = 568;
            startBtn.alpha = 0.01;
            startBtn.addChild(startBtnBg, startBtnTxt);

            startBtn.cursor = "pointer";

            stage.addChild(startBtn);

            startBtn.on("click", handleMouseEvent);

            var rulesBtnBg = new createjs.Shape();
            rulesBtnBg.name = "buttonBackground";
            rulesBtnBg.graphics.beginFill("red").drawRoundRect(0, 0, 256, 87, 20);

            var rulesBtnTxt = new createjs.Text("Regras", "bold 24px Arial", "#FFFFFF");
            rulesBtnTxt.name = "buttonText";
            rulesBtnTxt.textAlign = "center";
            rulesBtnTxt.textBaseline = "middle";
            rulesBtnTxt.x = 150/2;
            rulesBtnTxt.y = 60/2;

            var rulesBtn = new createjs.Container();
            rulesBtn.name = "rulesButton";
            rulesBtn.x = 384;
            rulesBtn.y = 434;
            rulesBtn.alpha = 0.01;
            rulesBtn.addChild(rulesBtnBg, rulesBtnTxt);

            rulesBtn.cursor = "pointer";

            stage.addChild(rulesBtn);

            rulesBtn.on("click", handleMouseEvent);
            
            createjs.Ticker.addEventListener("tick", handleTick);

            stage.update();
        }

        function addSkipButton() {
            var skipBtnBg = new createjs.Shape();
            skipBtnBg.name = "skipButtonBackground";
            skipBtnBg.graphics.beginFill("red").drawRoundRect(0, 0, 256, 87, 20);
            skipBtnBg.alpha = 0.01;

            var skipBtnImage = new createjs.Bitmap(preload.getResult("pass_button"));
            skipBtnImage.name = "skipButtonImage";
            skipBtnImage.x = 740;
            skipBtnImage.y = 650;

            var skipBtn = new createjs.Container();
            skipBtn.name = "skipButton";
            skipBtn.x = 740;
            skipBtn.y = 650;
            skipBtn.addChild(skipBtnBg);

            skipBtn.on("click", handleMouseEvent);

            skipBtn.cursor = "pointer";

            stage.addChild(skipBtn, skipBtnImage);
        }
        function firstLevel1(){
            clearStage();

            stage.name = "firstlevel1";

            createjs.Ticker.addEventListener("tick", handleTick);

            var firstLevelBackground = new createjs.Bitmap(preload.getResult("level1_birds"));
            stage.addChild(firstLevelBackground);
            stage.addChild(meterCounterTxt);

            var cBubbleSpeech = new createjs.Bitmap(preload.getResult("c_bubble"));
            cBubbleSpeech.name = "cBubbleSpeech";
            cBubbleSpeech.x = 365;
            cBubbleSpeech.y = 418;
            cBubbleSpeech.scaleX = 0.17;
            cBubbleSpeech.scaleY = 0.17;

            stage.addChild(cBubbleSpeech);

            playSound("c_sound");

            var cSharpBubbleSpeech = new createjs.Bitmap(preload.getResult("csharp_bubble"));
            cSharpBubbleSpeech.name = "cSharpBubbleSpeech";
            cSharpBubbleSpeech.x = 663;
            cSharpBubbleSpeech.y = 412;
            cSharpBubbleSpeech.scaleX = 0.17;
            cSharpBubbleSpeech.scaleY = 0.17;
            cSharpBubbleSpeech.visible = false;

            var blueBird = new createjs.Bitmap(preload.getResult("blue_bird"));
            blueBird.x = 720;
            blueBird.y = 450;
            blueBird.scaleX = 0.1;
            blueBird.scaleY = 0.1;

            var cSharpBird = new createjs.Container();
            cSharpBird.name = "cSharpBird";
            cSharpBird.addChild(blueBird, cSharpBubbleSpeech);
            stage.addChild(cSharpBird);

            addSkipButton();

            stage.update();
        }
        function addSignButtons(){
            var cSharpNoteBtn = new createjs.Shape();
            cSharpNoteBtn.name = "cSharpNoteBtn";
            cSharpNoteBtn.graphics.beginFill("red").drawRect(297, 500, 143, 25);
            cSharpNoteBtn.alpha = 0.01;
            cSharpNoteBtn.rotation = -8;
            cSharpNoteBtn.cursor = "pointer";

            cSharpNoteBtn.on("click", handleMouseEvent);

            var fNoteBtn = new createjs.Shape();
            fNoteBtn.name = "fNoteBtn";
            fNoteBtn.graphics.beginFill("red").drawRect(225, 530, 143, 25);
            fNoteBtn.alpha = 0.01;
            fNoteBtn.rotation = -8;
            fNoteBtn.cursor = "pointer";

            fNoteBtn.on("click", handleMouseEvent);

            var gNoteBtn = new createjs.Shape();
            gNoteBtn.name = "gNoteBtn";
            gNoteBtn.graphics.beginFill("red").drawRect(225, 560, 143, 25);
            gNoteBtn.alpha = 0.01;
            gNoteBtn.rotation = -8;
            gNoteBtn.cursor = "pointer";

            gNoteBtn.on("click", handleMouseEvent);

            var dNoteBtn = new createjs.Shape();
            dNoteBtn.name = "dNoteBtn";
            dNoteBtn.graphics.beginFill("red").drawRect(345, 555, 143, 25);
            dNoteBtn.alpha = 0.01;
            dNoteBtn.rotation = -3;
            dNoteBtn.cursor = "pointer";

            dNoteBtn.on("click", handleMouseEvent);

            var fSharpNoteBtn = new createjs.Shape();
            fSharpNoteBtn.name = "fSharpNoteBtn";
            fSharpNoteBtn.graphics.beginFill("red").drawRect(295, 620, 143, 25);
            fSharpNoteBtn.alpha = 0.01;
            fSharpNoteBtn.rotation = -8;
            fSharpNoteBtn.cursor = "pointer";

            fSharpNoteBtn.on("click", handleMouseEvent);

            var cNoteBtn = new createjs.Shape();
            cNoteBtn.name = "cNoteBtn";
            cNoteBtn.graphics.beginFill("red").drawRect(150, 680, 143, 25);
            cNoteBtn.alpha = 0.01;
            cNoteBtn.rotation = -14;
            cNoteBtn.cursor = "pointer";

            cNoteBtn.on("click", handleMouseEvent);

            var aNoteBtn = new createjs.Shape();
            aNoteBtn.name = "aNoteBtn";
            aNoteBtn.graphics.beginFill("red").drawRect(295, 680, 143, 25);
            aNoteBtn.alpha = 0.01;
            aNoteBtn.rotation = -8;
            aNoteBtn.cursor = "pointer";

            aNoteBtn.on("click", handleMouseEvent);

            stage.addChild(cSharpNoteBtn, fNoteBtn, gNoteBtn, dNoteBtn, fSharpNoteBtn, cNoteBtn, aNoteBtn);
        }

        function firstLevel2(){
            clearStage();

            stage.name = "firstlevel2";

            createjs.Ticker.addEventListener("tick", handleTick);
            startTime = (new Date()).getTime();

            var firstLevel2Background = new createjs.Bitmap(preload.getResult("level1_signs"));
            stage.addChild(firstLevel2Background);
            stage.addChild(meterCounterTxt);
            stage.addChild(timerTxt);

            var rightBubbleSpeech = new createjs.Bitmap(preload.getResult("question_mark_right"));
            rightBubbleSpeech.name = "rightBubbleSpeech";
            rightBubbleSpeech.x = 83;
            rightBubbleSpeech.y = 350;
            rightBubbleSpeech.scaleX = 0.17;
            rightBubbleSpeech.scaleY = 0.17;

            stage.addChild(rightBubbleSpeech);

            //create invisible buttons for signs
            addSignButtons();

            var leftBubbleSpeech = new createjs.Bitmap(preload.getResult("question_mark_left"));
            leftBubbleSpeech.name = "leftBubbleSpeech";
            leftBubbleSpeech.x = 663;
            leftBubbleSpeech.y = 412;
            leftBubbleSpeech.scaleX = 0.17;
            leftBubbleSpeech.scaleY = 0.17;

            var blueBird = new createjs.Bitmap(preload.getResult("blue_bird"));
            blueBird.x = 720;
            blueBird.y = 450;
            blueBird.scaleX = 0.1;
            blueBird.scaleY = 0.1;

            var cSharpBird = new createjs.Container();
            cSharpBird.name = "cSharpBird";
            cSharpBird.addChild(blueBird, leftBubbleSpeech);
            cSharpBird.visible = false;
            stage.addChild(cSharpBird);

            stage.update();
        }

        function addHousesButtons(){
            var cSharpNoteBtn = new createjs.Shape();
            cSharpNoteBtn.name = "csharp_sound";
            cSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 100, 210);
            cSharpNoteBtn.x = 20;
            cSharpNoteBtn.y = 352;
            cSharpNoteBtn.alpha = 0.01;
            cSharpNoteBtn.cursor = "pointer";

            cSharpNoteBtn.on("click", handleMouseEvent);
            cSharpNoteBtn.on("mouseover", handleMouseEvent);

            var fNoteBtn = new createjs.Shape();
            fNoteBtn.name = "f_sound";
            fNoteBtn.graphics.beginFill("red").drawRect(0, 0, 80, 115);
            fNoteBtn.x = 120;
            fNoteBtn.y = 455;
            fNoteBtn.alpha = 0.01;
            fNoteBtn.cursor = "pointer";

            fNoteBtn.on("click", handleMouseEvent);
            fNoteBtn.on("mouseover", handleMouseEvent);

            var gNoteBtn = new createjs.Shape();
            gNoteBtn.name = "g_sound";
            gNoteBtn.graphics.beginFill("red").drawRect(0, 0, 95, 105);
            gNoteBtn.x = 200;
            gNoteBtn.y = 475;
            gNoteBtn.alpha = 0.01;
            gNoteBtn.cursor = "pointer";

            gNoteBtn.on("click", handleMouseEvent);
            gNoteBtn.on("mouseover", handleMouseEvent);

            var dNoteBtn = new createjs.Shape();
            dNoteBtn.name = "d_sound";
            dNoteBtn.graphics.beginFill("red").drawRect(0, 0, 55, 115);
            dNoteBtn.x = 295;
            dNoteBtn.y = 455;
            dNoteBtn.alpha = 0.01;
            dNoteBtn.cursor = "pointer";

            dNoteBtn.on("click", handleMouseEvent);
            dNoteBtn.on("mouseover", handleMouseEvent);

            var fSharpNoteBtn = new createjs.Shape();
            fSharpNoteBtn.name = "fsharp_sound";
            fSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 72, 95);
            fSharpNoteBtn.x = 350;
            fSharpNoteBtn.y = 467;
            fSharpNoteBtn.alpha = 0.01;
            fSharpNoteBtn.cursor = "pointer";

            fSharpNoteBtn.on("click", handleMouseEvent);
            fSharpNoteBtn.on("mouseover", handleMouseEvent);

            var cNoteBtn = new createjs.Shape();
            cNoteBtn.name = "c_sound";
            cNoteBtn.graphics.beginFill("red").drawRect(0, 0, 80, 70);
            cNoteBtn.x = 523;
            cNoteBtn.y = 475;
            cNoteBtn.alpha = 0.01;
            cNoteBtn.cursor = "pointer";

            cNoteBtn.on("click", handleMouseEvent);
            cNoteBtn.on("mouseover", handleMouseEvent);

            var aNoteBtn = new createjs.Shape();
            aNoteBtn.name = "a_sound";
            aNoteBtn.graphics.beginFill("red").drawRect(0, 0, 67, 135);
            aNoteBtn.x = 603;
            aNoteBtn.y = 430;
            aNoteBtn.alpha = 0.01;
            aNoteBtn.cursor = "pointer";

            aNoteBtn.on("click", handleMouseEvent);
            aNoteBtn.on("mouseover", handleMouseEvent);

            var bNoteBtn = new createjs.Shape();
            bNoteBtn.name = "b_sound";
            bNoteBtn.graphics.beginFill("red").drawRect(0, 0, 95, 140);
            bNoteBtn.x = 668;
            bNoteBtn.y = 460;
            bNoteBtn.alpha = 0.01;
            bNoteBtn.cursor = "pointer";

            bNoteBtn.on("click", handleMouseEvent);
            bNoteBtn.on("mouseover", handleMouseEvent);

            var eNoteBtn = new createjs.Shape();
            eNoteBtn.name = "e_sound";
            eNoteBtn.graphics.beginFill("red").drawRect(0, 0, 55, 85);
            eNoteBtn.x = 760;
            eNoteBtn.y = 555;
            eNoteBtn.alpha = 0.01;
            eNoteBtn.cursor = "pointer";

            eNoteBtn.on("click", handleMouseEvent);
            eNoteBtn.on("mouseover", handleMouseEvent);

            var dSharpNoteBtn = new createjs.Shape();
            dSharpNoteBtn.name = "dsharp_sound";
            dSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 55, 120);
            dSharpNoteBtn.x = 910;
            dSharpNoteBtn.y = 508;
            dSharpNoteBtn.alpha = 0.01;
            dSharpNoteBtn.cursor = "pointer";

            dSharpNoteBtn.on("click", handleMouseEvent);
            dSharpNoteBtn.on("mouseover", handleMouseEvent);

            var gSharpNoteBtn = new createjs.Shape();
            gSharpNoteBtn.name = "gsharp_sound";
            gSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 55, 65);
            gSharpNoteBtn.x = 965;
            gSharpNoteBtn.y = 580;
            gSharpNoteBtn.alpha = 0.01;
            gSharpNoteBtn.cursor = "pointer";

            gSharpNoteBtn.on("click", handleMouseEvent);
            gSharpNoteBtn.on("mouseover", handleMouseEvent);

            stage.addChild(cSharpNoteBtn, fNoteBtn, gNoteBtn, dNoteBtn, fSharpNoteBtn, cNoteBtn, aNoteBtn, bNoteBtn, eNoteBtn, dSharpNoteBtn, gSharpNoteBtn);
        }
        function firstLevel3(){
            clearStage();

            stage.name = "firstlevel3";

            createjs.Ticker.addEventListener("tick", handleTick);
            startTime = (new Date()).getTime();

            var firstLevel3Background = new createjs.Bitmap(preload.getResult("level1_houses"));
            stage.addChild(firstLevel3Background);
            stage.addChild(meterCounterTxt);
            stage.addChild(timerTxt);

            addHousesButtons();

            stage.update();
        }

        function secondLevel1(){
            clearStage();

            stage.name = "secondlevel1";

            meterCounter = 940;

            createjs.Ticker.addEventListener("tick", handleTick);

            var secondLevelBackground = new createjs.Bitmap(preload.getResult("level2_kids"));
            stage.addChild(secondLevelBackground);
            stage.addChild(meterCounterTxt);

            var dBubbleSpeech = new createjs.Bitmap(preload.getResult("d_bubble"));
            dBubbleSpeech.name = "dBubbleSpeech";
            dBubbleSpeech.x = 455;
            dBubbleSpeech.y = 450;
            dBubbleSpeech.scaleX = 0.17;
            dBubbleSpeech.scaleY = 0.17;

            stage.addChild(dBubbleSpeech);

            playSound("d_sound");

            var dSharpBubbleSpeech = new createjs.Bitmap(preload.getResult("dsharp_bubble"));
            dSharpBubbleSpeech.name = "dSharpBubbleSpeech";
            dSharpBubbleSpeech.x = 580;
            dSharpBubbleSpeech.y = 513;
            dSharpBubbleSpeech.scaleX = 0.17;
            dSharpBubbleSpeech.scaleY = 0.17;
            dSharpBubbleSpeech.visible = false;

            stage.addChild(dSharpBubbleSpeech);

            addSkipButton();

            stage.update();
        }

        function addFlagsButtons() {
            var gNoteBtn = new createjs.Shape();
            gNoteBtn.name = "gNoteBtn";
            gNoteBtn.graphics.beginFill("red").drawRect(0, 0, 35, 35);
            gNoteBtn.alpha = 0.01;
            gNoteBtn.rotation = 6;
            gNoteBtn.x = 30;
            gNoteBtn.y = 495;
            gNoteBtn.cursor = "pointer";

            gNoteBtn.on("click", handleMouseEvent);

            var bNoteBtn = new createjs.Shape();
            bNoteBtn.name = "bNoteBtn";
            bNoteBtn.graphics.beginFill("red").drawRect(0, 0, 30, 35);
            bNoteBtn.alpha = 0.01;
            bNoteBtn.rotation = 2;
            bNoteBtn.x = 80;
            bNoteBtn.y = 485;
            bNoteBtn.cursor = "pointer";

            bNoteBtn.on("click", handleMouseEvent);

            var cSharpNoteBtn = new createjs.Shape();
            cSharpNoteBtn.name = "cSharpNoteBtn";
            cSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 30, 35);
            cSharpNoteBtn.alpha = 0.01;
            cSharpNoteBtn.rotation = 2;
            cSharpNoteBtn.x = 120;
            cSharpNoteBtn.y = 470;
            cSharpNoteBtn.cursor = "pointer";

            cSharpNoteBtn.on("click", handleMouseEvent);

            var eNoteBtn = new createjs.Shape();
            eNoteBtn.name = "eNoteBtn";
            eNoteBtn.graphics.beginFill("red").drawRect(0, 0, 30, 35);
            eNoteBtn.alpha = 0.01;
            eNoteBtn.rotation = -9;
            eNoteBtn.x = 150;
            eNoteBtn.y = 450;
            eNoteBtn.cursor = "pointer";

            eNoteBtn.on("click", handleMouseEvent);

            var dSharpNoteBtn = new createjs.Shape();
            dSharpNoteBtn.name = "dSharpNoteBtn";
            dSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 25, 25);
            dSharpNoteBtn.alpha = 0.01;
            dSharpNoteBtn.rotation = -45;
            dSharpNoteBtn.x = 175;
            dSharpNoteBtn.y = 440;
            dSharpNoteBtn.cursor = "pointer";

            dSharpNoteBtn.on("click", handleMouseEvent);

            var aSharpNoteBtn = new createjs.Shape();
            aSharpNoteBtn.name = "aSharpNoteBtn";
            aSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 25, 25);
            aSharpNoteBtn.alpha = 0.01;
            aSharpNoteBtn.rotation = -45;
            aSharpNoteBtn.x = 202;
            aSharpNoteBtn.y = 420;
            aSharpNoteBtn.cursor = "pointer";

            aSharpNoteBtn.on("click", handleMouseEvent);

            var cNoteBtn = new createjs.Shape();
            cNoteBtn.name = "cNoteBtn";
            cNoteBtn.graphics.beginFill("red").drawRect(0, 0, 45, 55);
            cNoteBtn.alpha = 0.01;
            cNoteBtn.rotation = -35;
            cNoteBtn.x = 70;
            cNoteBtn.y = 640;
            cNoteBtn.cursor = "pointer";

            cNoteBtn.on("click", handleMouseEvent);

            var dSharpNoteBtn2 = new createjs.Shape();
            dSharpNoteBtn2.name = "dSharpNoteBtn";
            dSharpNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 45, 55);
            dSharpNoteBtn2.alpha = 0.01;
            dSharpNoteBtn2.rotation = -45;
            dSharpNoteBtn2.x = 120;
            dSharpNoteBtn2.y = 600;
            dSharpNoteBtn2.cursor = "pointer";

            dSharpNoteBtn2.on("click", handleMouseEvent);

            var bNoteBtn2 = new createjs.Shape();
            bNoteBtn2.name = "bNoteBtn";
            bNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 35, 45);
            bNoteBtn2.alpha = 0.01;
            bNoteBtn2.rotation = -60;
            bNoteBtn2.x = 165;
            bNoteBtn2.y = 555;
            bNoteBtn2.cursor = "pointer";

            bNoteBtn2.on("click", handleMouseEvent);

            var aNoteBtn = new createjs.Shape();
            aNoteBtn.name = "aNoteBtn";
            aNoteBtn.graphics.beginFill("red").drawRect(0, 0, 25, 35);
            aNoteBtn.alpha = 0.01;
            aNoteBtn.rotation = -60;
            aNoteBtn.x = 195;
            aNoteBtn.y = 505;
            aNoteBtn.cursor = "pointer";

            aNoteBtn.on("click", handleMouseEvent);

            var eNoteBtn2 = new createjs.Shape();
            eNoteBtn2.name = "eNoteBtn";
            eNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 45, 35);
            eNoteBtn2.alpha = 0.01;
            eNoteBtn2.x = 230;
            eNoteBtn2.y = 630;
            eNoteBtn2.cursor = "pointer";

            eNoteBtn2.on("click", handleMouseEvent);

            var gNoteBtn2 = new createjs.Shape();
            gNoteBtn2.name = "gNoteBtn";
            gNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 55, 35);
            gNoteBtn2.alpha = 0.01;
            gNoteBtn2.x = 235;
            gNoteBtn2.y = 585;
            gNoteBtn2.cursor = "pointer";

            gNoteBtn2.on("click", handleMouseEvent);

            var aNoteBtn2 = new createjs.Shape();
            aNoteBtn2.name = "aNoteBtn";
            aNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 50, 25);
            aNoteBtn2.alpha = 0.01;
            aNoteBtn2.x = 235;
            aNoteBtn2.y = 550;
            aNoteBtn2.cursor = "pointer";

            aNoteBtn2.on("click", handleMouseEvent);

            var cNoteBtn2 = new createjs.Shape();
            cNoteBtn2.name = "cNoteBtn";
            cNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 35, 20);
            cNoteBtn2.alpha = 0.01;
            cNoteBtn2.x = 243;
            cNoteBtn2.y = 512;
            cNoteBtn2.cursor = "pointer";

            cNoteBtn2.on("click", handleMouseEvent);

            var aSharpNoteBtn2 = new createjs.Shape();
            aSharpNoteBtn2.name = "aSharpNoteBtn";
            aSharpNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 25, 20);
            aSharpNoteBtn2.alpha = 0.01;
            aSharpNoteBtn2.x = 245;
            aSharpNoteBtn2.y = 480;
            aSharpNoteBtn2.cursor = "pointer";

            aSharpNoteBtn2.on("click", handleMouseEvent);

            var fSharpNoteBtn = new createjs.Shape();
            fSharpNoteBtn.name = "fSharpNoteBtn";
            fSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 50, 35);
            fSharpNoteBtn.alpha = 0.01;
            fSharpNoteBtn.rotation = -15;
            fSharpNoteBtn.x = 335;
            fSharpNoteBtn.y = 660;
            fSharpNoteBtn.cursor = "pointer";

            fSharpNoteBtn.on("click", handleMouseEvent);

            var dNoteBtn = new createjs.Shape();
            dNoteBtn.name = "dNoteBtn";
            dNoteBtn.graphics.beginFill("red").drawRect(0, 0, 60, 40);
            dNoteBtn.alpha = 0.01;
            dNoteBtn.rotation = -45;
            dNoteBtn.x = 320;
            dNoteBtn.y = 615;
            dNoteBtn.cursor = "pointer";

            dNoteBtn.on("click", handleMouseEvent);

            var gSharpNoteBtn = new createjs.Shape();
            gSharpNoteBtn.name = "gSharpNoteBtn";
            gSharpNoteBtn.graphics.beginFill("red").drawRect(0, 0, 45, 30);
            gSharpNoteBtn.alpha = 0.01;
            gSharpNoteBtn.rotation = -45;
            gSharpNoteBtn.x = 305;
            gSharpNoteBtn.y = 575;
            gSharpNoteBtn.cursor = "pointer";

            gSharpNoteBtn.on("click", handleMouseEvent);

            var cNoteBtn3 = new createjs.Shape();
            cNoteBtn3.name = "cNoteBtn";
            cNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 45, 30);
            cNoteBtn3.alpha = 0.01;
            cNoteBtn3.rotation = -45;
            cNoteBtn3.x = 290;
            cNoteBtn3.y = 540;
            cNoteBtn3.cursor = "pointer";

            cNoteBtn3.on("click", handleMouseEvent);

            var fNoteBtn = new createjs.Shape();
            fNoteBtn.name = "fNoteBtn";
            fNoteBtn.graphics.beginFill("red").drawRect(0, 0, 40, 25);
            fNoteBtn.alpha = 0.01;
            fNoteBtn.rotation = -45;
            fNoteBtn.x = 280;
            fNoteBtn.y = 500;
            fNoteBtn.cursor = "pointer";

            fNoteBtn.on("click", handleMouseEvent);

            var gNoteBtn3 = new createjs.Shape();
            gNoteBtn3.name = "gNoteBtn";
            gNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 35, 25);
            gNoteBtn3.alpha = 0.01;
            gNoteBtn3.rotation = -35;
            gNoteBtn3.x = 260;
            gNoteBtn3.y = 460;
            gNoteBtn3.cursor = "pointer";

            gNoteBtn3.on("click", handleMouseEvent);

            var bNoteBtn3 = new createjs.Shape();
            bNoteBtn3.name = "bNoteBtn";
            bNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 30, 20);
            bNoteBtn3.alpha = 0.01;
            bNoteBtn3.rotation = -35;
            bNoteBtn3.x = 253;
            bNoteBtn3.y = 427;
            bNoteBtn3.cursor = "pointer";

            bNoteBtn3.on("click", handleMouseEvent);

            var eNoteBtn3 = new createjs.Shape();
            eNoteBtn3.name = "eNoteBtn";
            eNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 40, 30);
            eNoteBtn3.alpha = 0.01;
            eNoteBtn3.rotation = -35;
            eNoteBtn3.x = 500;
            eNoteBtn3.y = 628;
            eNoteBtn3.cursor = "pointer";

            eNoteBtn3.on("click", handleMouseEvent);

            var aNoteBtn3 = new createjs.Shape();
            aNoteBtn3.name = "aNoteBtn";
            aNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 50, 30);
            aNoteBtn3.alpha = 0.01;
            aNoteBtn3.rotation = -35;
            aNoteBtn3.x = 455;
            aNoteBtn3.y = 597;
            aNoteBtn3.cursor = "pointer";

            aNoteBtn3.on("click", handleMouseEvent);

            var fSharpNoteBtn2 = new createjs.Shape();
            fSharpNoteBtn2.name = "fSharpNoteBtn";
            fSharpNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 50, 30);
            fSharpNoteBtn2.alpha = 0.01;
            fSharpNoteBtn2.rotation = -35;
            fSharpNoteBtn2.x = 420;
            fSharpNoteBtn2.y = 562;
            fSharpNoteBtn2.cursor = "pointer";

            fSharpNoteBtn2.on("click", handleMouseEvent);

            var dSharpNoteBtn3 = new createjs.Shape();
            dSharpNoteBtn3.name = "dSharpNoteBtn";
            dSharpNoteBtn3.graphics.beginFill("red").drawRect(0, 0, 50, 30);
            dSharpNoteBtn3.alpha = 0.01;
            dSharpNoteBtn3.rotation = -35;
            dSharpNoteBtn3.x = 390;
            dSharpNoteBtn3.y = 535;
            dSharpNoteBtn3.cursor = "pointer";

            dSharpNoteBtn3.on("click", handleMouseEvent);

            var fNoteBtn2 = new createjs.Shape();
            fNoteBtn2.name = "fNoteBtn";
            fNoteBtn2.graphics.beginFill("red").drawRect(0, 0, 40, 30);
            fNoteBtn2.alpha = 0.01;
            fNoteBtn2.rotation = -35;
            fNoteBtn2.x = 360;
            fNoteBtn2.y = 500;
            fNoteBtn2.cursor = "pointer";

            fNoteBtn2.on("click", handleMouseEvent);

            var bNoteBtn4 = new createjs.Shape();
            bNoteBtn4.name = "bNoteBtn";
            bNoteBtn4.graphics.beginFill("red").drawRect(0, 0, 40, 30);
            bNoteBtn4.alpha = 0.01;
            bNoteBtn4.rotation = -45;
            bNoteBtn4.x = 325;
            bNoteBtn4.y = 465;
            bNoteBtn4.cursor = "pointer";

            bNoteBtn4.on("click", handleMouseEvent);

            var cNoteBtn4 = new createjs.Shape();
            cNoteBtn4.name = "cNoteBtn";
            cNoteBtn4.graphics.beginFill("red").drawRect(0, 0, 35, 25);
            cNoteBtn4.alpha = 0.01;
            cNoteBtn4.rotation = -45;
            cNoteBtn4.x = 300;
            cNoteBtn4.y = 430;
            cNoteBtn4.cursor = "pointer";

            cNoteBtn4.on("click", handleMouseEvent);

            stage.addChild(gNoteBtn, bNoteBtn, cSharpNoteBtn, eNoteBtn, dSharpNoteBtn, aSharpNoteBtn, cNoteBtn, dSharpNoteBtn2, bNoteBtn2, aNoteBtn, eNoteBtn2, gNoteBtn2, aNoteBtn2, aSharpNoteBtn2, cNoteBtn2, fSharpNoteBtn, dNoteBtn, gSharpNoteBtn, cNoteBtn3, fNoteBtn, gNoteBtn3, bNoteBtn3, eNoteBtn3, aNoteBtn3, fSharpNoteBtn2, dSharpNoteBtn3, fNoteBtn2, bNoteBtn4, cNoteBtn4);
        }
        function secondLevel2(){
            clearStage();

            stage.name = "secondlevel2";

            createjs.Ticker.addEventListener("tick", handleTick);
            startTime = (new Date()).getTime();

            var secondLevel2Background = new createjs.Bitmap(preload.getResult("level2_flags"));
            stage.addChild(secondLevel2Background);
            stage.addChild(meterCounterTxt);
            stage.addChild(timerTxt);

            var rightBubbleSpeech = new createjs.Bitmap(preload.getResult("question_mark_right"));
            rightBubbleSpeech.name = "rightBubbleSpeech";
            rightBubbleSpeech.x = 545;
            rightBubbleSpeech.y = 423;
            rightBubbleSpeech.scaleX = 0.17;
            rightBubbleSpeech.scaleY = 0.17;

            var boy = new createjs.Bitmap(preload.getResult("boy"));
            boy.x = 500;
            boy.y = 450;
            boy.scaleX = 0.2;
            boy.scaleY = 0.2;

            var boyContainer = new createjs.Container();
            boyContainer.name = "boyContainer";
            boyContainer.addChild(boy, rightBubbleSpeech);

            stage.addChild(boyContainer);

            //create invisible buttons for signs
            addFlagsButtons();

            var leftBubbleSpeech = new createjs.Bitmap(preload.getResult("question_mark_left"));
            leftBubbleSpeech.name = "leftBubbleSpeech";
            leftBubbleSpeech.x = 585;
            leftBubbleSpeech.y = 565;
            leftBubbleSpeech.scaleX = 0.17;
            leftBubbleSpeech.scaleY = 0.17;

            var girl = new createjs.Bitmap(preload.getResult("girl"));
            girl.x = 610;
            girl.y = 580;
            girl.scaleX = 0.3;
            girl.scaleY = 0.3;

            var girlContainer = new createjs.Container();
            girlContainer.name = "girlContainer";
            girlContainer.addChild(girl, leftBubbleSpeech);
            girlContainer.visible = false;
            stage.addChild(girlContainer);

            stage.update();
        }

        function addTracksButtons() {

        }
        function firstLevel3(){
            clearStage();

            stage.name = "firstlevel3";

            createjs.Ticker.addEventListener("tick", handleTick);
            startTime = (new Date()).getTime();

            var firstLevel3Background = new createjs.Bitmap(preload.getResult("level1_houses"));
            stage.addChild(firstLevel3Background);
            stage.addChild(meterCounterTxt);
            stage.addChild(timerTxt);

            addTracksButtons();

            stage.update();
        }
        function selectionLevel(){
            clearStage();

            stage.name = "selectionLevel";
            var selectionLevelBackground = new createjs.Bitmap(preload.getResult("selection_level_background"));
            stage.addChild(selectionLevelBackground);

            var firstLevel = new createjs.Shape();
            firstLevel.graphics.beginFill("red").drawRoundRect(0, 0, 130, 35, 10);
            firstLevel.x = 216;
            firstLevel.y = 707;
            firstLevel.alpha = 0.01;
            firstLevel.cursor = "pointer";
            firstLevel.name = "firstLevel";
            firstLevel.on("mouseover", handleMouseEvent);
            firstLevel.on("mouseout", handleMouseEvent);
            firstLevel.on("click", handleMouseEvent);

            var secondLevel = new createjs.Shape();
            secondLevel.graphics.beginFill("red").drawRoundRect(0, 0, 250, 35, 10);
            secondLevel.x = 360;
            secondLevel.y = 670;
            secondLevel.alpha = 0.01;
            secondLevel.cursor = "pointer";
            secondLevel.name = "secondLevel";
            secondLevel.on("mouseover", handleMouseEvent);
            secondLevel.on("mouseout", handleMouseEvent);
            secondLevel.on("click", handleMouseEvent);

            stage.addChild(firstLevel, secondLevel);

            stage.update();
        }
        function clearStage(){
            for(var i = 0; i < stage.numChildren; i++){
                stage.removeChildAt(i);
                stage.update();
                i--;
            }
            if(birdSound != null){
                birdSound.stop();
            }
            if(houseSound != null){
                houseSound.stop();
            }
            if(kidSound != null){
                kidSound.stop();
            }
            fibonacci = 1;
        }
    </script>
</head>
<body onload="init();">
<div id="content">
<canvas id="canvas" width="1024" height="768"></canvas>
</div>
</body>
</html>
